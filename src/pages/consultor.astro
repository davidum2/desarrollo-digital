---
import Layout from '../layouts/Layout.astro';
import '../styles/formulario.css';
---

<Layout
  title="Formulario de consulta"
  description="Formulario para obtener un roadmap personalizado para tu emprendimiento digital"
  keywords="Formulario, desarrollo, emprendimiento, consultoría, negocio, online"
  robot="follow"
>
  <div class="min-h-screen flex items-center justify-center p-4">
    <form
      id="consultForm"
      class="bg-white dark:bg-slate-800 rounded-xl shadow-lg w-full max-w-2xl p-6 md:p-8"
    >
      <!-- Barra de progreso y seguridad -->
      <div class="mb-8 relative">
        <div class="flex justify-between items-center mb-2">
          <span
            class="text-sm text-light-secondary dark:text-dark-secondary"
            id="step-counter">Paso 1 de 5</span
          >
          <span
            class="text-sm text-light-secondary dark:text-dark-secondary"
            id="step-percentage">20%</span
          >
        </div>
        <div class="step-indicator flex-1 h-2 bg-gray-200 rounded-full">
          <div
            class="h-full bg-light-accent2 dark:bg-dark-accent1 rounded-full transition-all duration-300"
            style="width: 20%"
            id="progress-bar"
          >
          </div>
        </div>
        <!-- Badge de seguridad -->
        <div
          class="absolute -top-1 right-0 flex items-center text-xs text-light-secondary dark:text-dark-secondary bg-gray-50 dark:bg-slate-700 px-2 py-1 rounded-full shadow-sm border border-gray-200 dark:border-slate-600 transform translate-y-6"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-3 w-3 mr-1 text-green-500"
            viewBox="0 0 20 20"
            fill="currentColor"
          >
            <path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
              clip-rule="evenodd"></path>
          </svg>
          Seguro
        </div>
      </div>

      <!-- Paso 1: Introducción -->
      <div class="pasos active" data-step="1">
        <h1
          class="text-3xl text-center font-libre font-bold text-light-secondary dark:text-dark-secondary mb-4"
        >
          Tu camino hacia el éxito digital
        </h1>
        <h2
          class="text-xl font-semibold text-center text-light-secondary dark:text-dark-secondary mb-6"
        >
          Claves de un Negocio Exitoso (Sin Jerga Complicada)
        </h2>
        <p
          class="text-light-secondary dark:text-dark-secondary font-lato mb-4 text-center"
        >
          Antes de empezar a pensar en tu negocio online, repasemos juntos
          algunos pilares fundamentales para tener éxito:
        </p>
        <div
          class="space-y-4 text-light-secondary dark:text-dark-secondary font-lato"
        >
          <p class="flex items-start">
            <span class="mr-2 text-light-accent2 dark:text-dark-accent1">•</span
            >
            Tener algo valioso que ofrecer: Que resuelva un problema o satisfaga
            una necesidad
          </p>
          <p class="flex items-start">
            <span class="mr-2 text-light-accent2 dark:text-dark-accent1">•</span
            >
            Saber a quién se lo ofreces: Conocer bien a tus clientes ideales
          </p>
          <p class="flex items-start">
            <span class="mr-2 text-light-accent2 dark:text-dark-accent1">•</span
            >
            Ofrecer algo que te haga especial: Que te distinga de otros negocios
            similares
          </p>
          <p class="flex items-start">
            <span class="mr-2 text-light-accent2 dark:text-dark-accent1">•</span
            >
            Tener una meta clara: Saber a dónde quieres llegar
          </p>
          <p class="flex items-start">
            <span class="mr-2 text-light-accent2 dark:text-dark-accent1">•</span
            >
            Ser constante: No rendirse ante los obstáculos
          </p>
          <p class="flex items-start">
            <span class="mr-2 text-light-accent2 dark:text-dark-accent1">•</span
            >
            Adaptarse: Cambiar si algo no funciona y buscar mejorar
          </p>
        </div>
      </div>

      <!-- Paso 2: Propuesta de valor y público objetivo -->
      <div class="pasos" data-step="2">
        <h2
          class="text-2xl font-libre font-bold text-light-secondary dark:text-dark-secondary mb-6"
        >
          Tu negocio: propuesta y público
        </h2>
        <div class="space-y-8">
          <!-- Propuesta de valor -->
          <div class="form-group">
            <h3
              class="text-xl font-libre font-semibold text-light-secondary dark:text-dark-secondary mb-4 flex items-center"
            >
              ¿Qué problema resuelve tu negocio?
              <button
                id="insert-propuesta-example"
                type="button"
                class="ml-2 text-xs px-2 py-1 bg-light-accent1 dark:bg-dark-accent1 text-white rounded-md"
                >Ver ejemplo</button
              >
            </h3>
            <label
              class="block text-light-secondary dark:text-dark-secondary mb-2 font-lato"
            >
              Piensa en qué necesidad satisfaces o qué problema le resuelves a
              tus clientes. No te enfoques en lo que vendes, sino en el
              beneficio.
            </label>
            <textarea
              data-validate="required"
              name="propuestaValor"
              placeholder="Ej: No vendes 'café', vendes 'una pausa en el día'"
              class="w-full px-4 py-3 rounded-lg border-2 text-light-secondary dark:text-dark-secondary bg-white dark:bg-slate-700 border-gray-200 dark:border-slate-600 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all resize-none font-lato"
              maxlength="300"
              rows="3"></textarea>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>

          <!-- Público objetivo -->
          <div class="form-group">
            <h3
              class="text-xl font-libre font-semibold text-light-secondary dark:text-dark-secondary mb-4"
            >
              ¿A quién le quieres vender? (Público objetivo)
            </h3>
            <label
              class="block text-light-secondary dark:text-dark-secondary mb-2 font-lato"
            >
              Describe a tu cliente ideal, ¿quiénes son esas personas que más se
              beneficiarían de tu producto o servicio?
            </label>
            <textarea
              data-validate="required"
              name="publicoObjetivo"
              placeholder="Ej: Mujeres entre 25 y 60 años que les gusta una vida saludable"
              class="w-full px-4 py-3 rounded-lg border-2 text-light-secondary dark:text-dark-secondary bg-white dark:bg-slate-700 border-gray-200 dark:border-slate-600 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all resize-none font-lato"
              maxlength="300"
              rows="3"></textarea>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>
        </div>
      </div>

      <!-- Paso 3: Cliente ideal y necesidad actual -->
      <div class="pasos" data-step="3">
        <div class="space-y-8">
          <!-- Cliente ideal -->
          <div class="form-group">
            <h3
              class="text-xl font-libre font-semibold text-light-secondary dark:text-dark-secondary mb-4"
            >
              Si pudieras tener un cliente ideal, ¿cómo sería?
            </h3>
            <label
              class="block text-light-secondary dark:text-dark-secondary mb-2 font-lato"
            >
              Piensa en ese cliente que ama lo que vendes, que te compra seguido
              y que te recomienda a sus amigos.
            </label>
            <textarea
              data-validate="required"
              name="clienteIdeal"
              placeholder="Ej: Personas que valoren la calidad sobre el precio"
              class="w-full px-4 py-3 rounded-lg border-2 text-light-secondary dark:text-dark-secondary bg-white dark:bg-slate-700 border-gray-200 dark:border-slate-600 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all resize-none font-lato"
              maxlength="300"
              rows="3"></textarea>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>

          <!-- Necesidad actual -->
          <div class="form-group">
            <h3
              class="text-xl font-libre font-semibold text-light-secondary dark:text-dark-secondary mb-4"
            >
              ¿Cómo está tu negocio ahora? (Necesidad actual)
            </h3>
            <label
              class="block text-light-secondary dark:text-dark-secondary mb-2 font-lato"
            >
              ¿Ya tienes un local, vendes por redes sociales, tienes página web
              o apenas estás empezando con una idea?
            </label>
            <textarea
              data-validate="required"
              name="necesidadActual"
              placeholder="Ej: Tengo un local físico, pero quiero llegar a más clientes online"
              class="w-full px-4 py-3 rounded-lg border-2 text-light-secondary dark:text-dark-secondary bg-white dark:bg-slate-700 border-gray-200 dark:border-slate-600 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all resize-none font-lato"
              maxlength="300"
              rows="3"></textarea>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>
        </div>
      </div>

      <!-- Paso 4: Presupuesto y metas -->
      <div class="pasos" data-step="4">
        <div class="space-y-8">
          <!-- Presupuesto -->
          <div class="form-group">
            <h3
              class="text-xl font-libre font-semibold text-light-secondary dark:text-dark-secondary mb-4"
            >
              ¿Cuánto quieres invertir para impulsar tu negocio?
            </h3>
            <label
              class="block text-light-secondary dark:text-dark-secondary mb-2 font-lato"
            >
              No se trata de "cuánto dinero tienes", sino de cuánto estás
              dispuesto a invertir para lograr tus metas.
            </label>

            <!-- Slider para presupuesto -->
            <div class="mb-4">
              <input
                type="range"
                id="budget-slider"
                min="0"
                max="10000"
                step="100"
                value="1000"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
              />
              <div
                class="flex justify-between text-xs text-light-secondary dark:text-dark-secondary mt-1"
              >
                <span>$0</span>
                <span>$5,000</span>
                <span>$10,000</span>
              </div>
            </div>

            <!-- Input de presupuesto -->
            <div class="relative">
              <div class="flex">
                <div
                  class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"
                >
                  <span
                    id="currency-symbol"
                    class="text-light-secondary dark:text-dark-secondary"
                    >$</span
                  >
                </div>
                <input
                  name="presupuesto"
                  data-validate="required"
                  type="number"
                  class="w-full pl-10 px-4 py-3 rounded-lg border-2 text-light-secondary dark:text-dark-secondary bg-white dark:bg-slate-700 border-gray-200 dark:border-slate-600 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all font-lato"
                  placeholder="1000"
                  inputmode="numeric"
                  min="0"
                  step="100"
                  value="1000"
                />
              </div>
              <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                <select
                  id="currency-select"
                  name="moneda"
                  class="border border-gray-300 dark:border-slate-600 text-light-secondary dark:text-dark-secondary bg-white dark:bg-slate-700 rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all font-lato"
                >
                  <option value="USD" selected>USD</option>
                  <option value="MXN">MXN</option>
                </select>
              </div>
            </div>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>

          <!-- Metas SMART -->
          <div class="form-group">
            <h3
              class="text-xl font-libre font-semibold text-light-secondary dark:text-dark-secondary mb-4 flex items-center"
            >
              ¿Qué quieres lograr con tu negocio en internet?
              <button
                id="insert-meta-example"
                type="button"
                class="ml-2 text-xs px-2 py-1 bg-light-accent1 dark:bg-dark-accent1 text-white rounded-md"
                >Ver ejemplo</button
              >
            </h3>
            <label
              class="block text-light-secondary dark:text-dark-secondary mb-2 font-lato"
            >
              Tus metas deben ser específicas, medibles, alcanzables, realistas
              y con un tiempo definido.
            </label>
            <textarea
              data-validate="required"
              name="metas"
              id="metas"
              placeholder="Ej: Quiero aumentar mis ventas un 20% en los próximos 3 meses"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all resize-none text-light-secondary dark:text-dark-secondary font-lato"
              maxlength="300"
              rows="3"></textarea>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>
        </div>
      </div>

      <!-- Paso 5: Información de contacto -->
      <div class="pasos" data-step="5">
        <h2
          class="text-2xl font-libre font-bold text-light-secondary dark:text-dark-secondary mb-6"
        >
          Tu información de contacto
        </h2>
        <div class="space-y-6">
          <!-- Nombre -->
          <div class="form-group">
            <label
              class="block text-light-secondary dark:text-dark-secondary text-sm font-medium mb-2 font-lato"
            >
              ¿Cómo quieres que te llamen?
            </label>
            <input
              data-validate="required"
              name="nombreCliente"
              type="text"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all text-light-secondary dark:text-dark-secondary font-lato"
              placeholder="Tu nombre"
            />
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>

          <!-- Nombre del negocio -->
          <div class="form-group">
            <label
              class="block text-light-secondary dark:text-dark-secondary text-sm font-medium mb-2 font-lato"
            >
              Nombre de tu negocio o marca
            </label>
            <input
              data-validate="required"
              name="marca"
              type="text"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all text-light-secondary dark:text-dark-secondary font-lato"
              placeholder="Nombre de tu negocio o marca"
            />
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>

          <!-- Correo electrónico -->
          <div class="form-group">
            <label
              class="block text-light-secondary dark:text-dark-secondary text-sm font-medium mb-2 font-lato"
            >
              Correo electrónico
            </label>
            <input
              data-validate="email"
              name="correo"
              type="email"
              class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 dark:border-slate-600 bg-white dark:bg-slate-700 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all text-light-secondary dark:text-dark-secondary font-lato"
              placeholder="ejemplo@correo.com"
            />
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Ingresa un correo válido</span
            >
          </div>

          <!-- Teléfono -->
          <div class="form-group">
            <label
              class="block text-light-secondary dark:text-dark-secondary text-sm font-medium mb-2 font-lato"
            >
              Teléfono (WhatsApp)
            </label>
            <div class="flex">
              <div
                class="flex-shrink-0 w-16 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-l-lg flex items-center justify-center"
              >
                <select
                  name="lada"
                  class="bg-transparent w-full h-full px-1 py-3 focus:outline-none text-light-secondary dark:text-dark-secondary font-lato"
                >
                  <option value="+52" selected>🇲🇽</option>
                  <option value="+1">🇺🇸</option>
                  <option value="+34">🇪🇸</option>
                  <option value="+54">🇦🇷</option>
                  <option value="+57">🇨🇴</option>
                  <option value="+56">🇨🇱</option>
                  <option value="+51">🇵🇪</option>
                  <option value="+58">🇻🇪</option>
                </select>
              </div>
              <input
                data-validate="required|phone"
                name="telefono"
                type="tel"
                placeholder="Ej: 1234567890"
                class="w-full border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 rounded-r-lg px-4 py-3 focus:border-light-accent2 dark:focus:border-dark-accent1 focus:ring-2 focus:ring-light-accent1 dark:focus:ring-dark-accent2 transition-all text-light-secondary dark:text-dark-secondary font-lato"
              />
            </div>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Este campo es requerido</span
            >
          </div>

          <!-- Términos y condiciones -->
          <div class="mt-4">
            <label class="inline-flex items-center">
              <input
                type="checkbox"
                name="acceptTerms"
                data-validate="required"
                class="form-checkbox h-5 w-5 text-light-accent2 dark:text-dark-accent1"
              />
              <span
                class="ml-2 text-light-secondary dark:text-dark-secondary text-sm font-lato"
              >
                Acepto la
                <a
                  href="/politica-privacidad"
                  target="_blank"
                  class="text-light-accent2 dark:text-dark-accent1 underline"
                >
                  Política de Privacidad
                </a>
                y los
                <a
                  href="/terminosYcondiciones"
                  target="_blank"
                  class="text-light-accent2 dark:text-dark-accent1 underline"
                >
                  Términos y Condiciones
                </a>.
              </span>
            </label>
            <span class="error-message hidden text-red-500 text-sm mt-1"
              >Debes aceptar los términos y condiciones</span
            >
          </div>
        </div>
      </div>

      <!-- Notificaciones -->
      <div id="notification" class="hidden mt-4 p-4 rounded-lg text-center">
        <p id="notification-message" class="font-lato"></p>
      </div>

      <!-- Botones de navegación -->
      <div class="mt-8 flex flex-col md:flex-row gap-4 justify-between">
        <button
          type="button"
          class="btn-prev w-full md:w-auto px-6 py-3 bg-gray-200 hover:bg-gray-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-light-secondary dark:text-dark-secondary rounded-lg transition-colors hidden font-lato"
        >
          <span class="flex items-center justify-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 mr-2"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z"
                clip-rule="evenodd"></path>
            </svg>
            Anterior
          </span>
        </button>
        <button
          type="button"
          class="btn-next w-full md:w-auto px-6 py-3 bg-light-accent2 dark:bg-dark-accent1 text-white rounded-lg hover:bg-light-secondary dark:hover:bg-dark-accent2 transition-colors font-lato"
        >
          <span class="flex items-center justify-center">
            Siguiente
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-5 w-5 ml-2"
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z"
                clip-rule="evenodd"></path>
            </svg>
          </span>
        </button>
        <button
          type="submit"
          class="btn-submit w-full md:w-auto px-6 py-3 bg-light-accent2 dark:bg-dark-accent1 text-white rounded-lg hover:bg-green-700 dark:hover:bg-dark-accent2 transition-colors hidden font-lato"
        >
          <span class="flex items-center justify-center">
            Enviar solicitud
            <svg
              id="loading-spinner"
              class="hidden ml-2 w-5 h-5 spinner"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <circle
                class="opacity-25"
                cx="12"
                cy="12"
                r="10"
                stroke="currentColor"
                stroke-width="4"></circle>
              <path
                class="opacity-75"
                fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
              ></path>
            </svg>
          </span>
        </button>
      </div>
    </form>
  </div>
</Layout>

<script>
  // Importamos el script mejorado que maneja la hidratación con ViewTransitions
  import '../scripts/formConsultor.js';
</script>
